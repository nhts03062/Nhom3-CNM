<div *ngIf="isOpen" class="modal">
  <div class="modal-backdrop">
    <div class="modal-content">
      <div *ngIf="user">
        <header class="modal-container-header">
          <h5>Profile</h5>
        </header>
        <div class="main-body">
          <div class="row">
            <div class="d-flex flex-column align-items-center text-center pt-3">
              <img [src]="user.avatarUrl" alt="Admin" class="rounded-circle p-1 bg-primary" width="110">
              <!-- <div class="online" *ngIf="user.online"></div> -->
              <div class="mt-3">
                <h4>{{ user.name }}</h4>
                <p class="text-muted font-size-sm">{{ user.address }}</p>
              </div>
            </div>
            <div class="d-flex justify-content-center gap-3 mb-3">
              <button
                class="btn px-4 flex-fill text-white"
                [ngClass]="{
                  'btn-success': isFriend,
                  'btn btn-info': requestSent && !isFriend,
                  'btn-primary': !requestSent && !isFriend
                }"
                style="max-width: 175px;"
                (click)="sendRequest(user._id)"
              >
                <ng-container *ngIf="isFriend">
                  Friend <i class="fa-solid fa-user-check"></i>
                </ng-container>

                <ng-container *ngIf="!isFriend">
                  <span class="d-inline-flex align-items-center">
                    <ng-container *ngIf="requestSent; else notSent">
                      <span class="d-inline-flex align-items-center">
                        Request Sent <i class="fa-solid fa-xmark"></i>
                      </span>
                    </ng-container>
                    <ng-template #notSent>
                      <span class="d-inline-flex align-items-center">
                        Add Friend<i class="fa-solid fa-user-plus" style="color:#fff"></i>
                      </span>
                    </ng-template>
                  </span>                  
                  
                </ng-container>
              </button>

              <button
                class="btn btn-secondary px-4 flex-fill"
                value="Chat"
                style="max-width: 150px;"
                (click)="startChat(user._id)"
                >
                Chat
              </button>

            </div>
            
            
          </div>
        </div>
        <footer class="modal-container-footer">
          <button class="button is-ghost" (click)="close()">Cancel</button>
        </footer>
      </div>
      <div *ngIf="user === undefined">
        <header class="modal-container-header">
          <h5>Profile</h5>
        </header>
        <h4>No user found.</h4>
        <footer class="modal-container-footer">
          <button class="button is-ghost" (click)="close()">Cancel</button>
        </footer>
      </div>
    </div>
  </div>
</div>
